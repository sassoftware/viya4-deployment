---
apiVersion: builtin
kind: ConfigMapGenerator
metadata:
  name: sas-shared-config
behavior: merge
literals:
  - SAS_SERVICES_URL={{V4_CFG_DEPLOYMENT_URL_PREFIX }}{{V4_CFG_INGRESS_NAME }}{{V4_CFG_DEPLOYMENT_URL_PORT }}
{% if V4_CFG_ENABLE_CONSUL_UI is defined and V4_CFG_ENABLE_CONSUL_UI %}
  - CONSUL_OPTIONS=-client 0.0.0.0 -ui
{% endif %}
{% if V4_CFG_POSTGRES_TYPE is defined and V4_CFG_POSTGRES_TYPE == 'external' %}
  - SPRING_DATASOURCE_USERNAME={{V4_CFG_POSTGRES_ADMIN_LOGIN }}
  - SPRING_DATASOURCE_PASSWORD={{V4_CFG_POSTGRES_PASSWORD }}
  - SAS_DATABASE_DATABASE={{ V4_CFG_POSTGRES_DATABASE }}
{% endif %}